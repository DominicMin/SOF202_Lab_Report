{% extends "base.html" %}
{% block title %}Training Session{% endblock %}
{% block pre_main %}
  {% include "partials/page_header.html" with title="Training Session" description="Review details and enrollments for this session." %}
{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">Session #{{ session.pk }}</h2>
  <div class="btn-group">
    <a class="btn btn-outline-primary btn-sm" href="{% url 'management:training_session_edit' session.pk %}">Edit</a>
    <a class="btn btn-outline-danger btn-sm" href="{% url 'management:training_session_delete' session.pk %}">Delete</a>
  </div>
</div>
<div class="row">
  <div class="col-md-6 mb-4">
    <div class="card h-100">
      <div class="card-header">Session Information</div>
      <div class="card-body">
        <dl class="row mb-0">
          <dt class="col-sm-4">Facility</dt>
          <dd class="col-sm-8">{{ session.reservation.facility.facility_name }}</dd>

          <dt class="col-sm-4">Location</dt>
          <dd class="col-sm-8">
            {{ session.reservation.facility.building }} -
            L{{ session.reservation.facility.floor }} -
            {{ session.reservation.facility.room_number }}
          </dd>

          <dt class="col-sm-4">Date</dt>
          <dd class="col-sm-8">{{ session.reservation.reservation_date }}</dd>

          <dt class="col-sm-4">Time</dt>
          <dd class="col-sm-8">{{ session.reservation.start_time }} - {{ session.reservation.end_time }}</dd>

          <dt class="col-sm-4">Coach</dt>
          <dd class="col-sm-8">{{ session.coach.first_name }} {{ session.coach.last_name }}</dd>

          <dt class="col-sm-4">Capacity</dt>
          <dd class="col-sm-8">{{ enrollments.count }} / {{ session.max_capacity }}</dd>
        </dl>
      </div>
    </div>
  </div>
  <div class="col-md-6 mb-4">
    <div class="card h-100">
      <div class="card-header">Enrollments</div>
      <div class="card-body">
        {% if enrollments %}
        <ul class="list-group list-group-flush">
          {% for enrollment in enrollments %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>{{ enrollment.member.first_name }} {{ enrollment.member.last_name }}</span>
            <span class="text-muted small">{{ enrollment.member.membership_status }}</span>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p class="text-muted mb-0">No enrollments yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
<a class="btn btn-link" href="{% url 'management:training_session_list' %}">Back to list</a>
{% endblock %}
