{% extends "base.html" %}
{% block title %}Training Sessions{% endblock %}
{% block pre_main %}
  {% include "partials/page_header.html" with title="Training Sessions" description="Browse and enroll in available training sessions." %}
{% endblock %}
{% block content %}
<div class="row">
  {% for session in sessions %}
  <div class="col-md-4 mb-4">
    <div class="card h-100">
      <div class="card-body">
        <h5 class="card-title">{{ session.coach.first_name }} {{ session.coach.last_name }}</h5>
        <h6 class="card-subtitle mb-2 text-muted">{{ session.coach.sport_type }}</h6>
        <p class="card-text">
          <strong>Date:</strong> {{ session.reservation.reservation_date }}<br>
          <strong>Time:</strong> {{ session.reservation.start_time }} - {{ session.reservation.end_time }}<br>
          <strong>Facility:</strong> {{ session.reservation.facility.facility_name }}<br>
          <strong>Capacity:</strong> {{ session.max_capacity }}
        </p>
        {% if session.pk in existing_ids %}
        <button class="btn btn-secondary w-100" disabled>Enrolled</button>
        {% else %}
        <a href="{% url 'members:training_enroll' session.pk %}" class="btn btn-primary w-100">Enroll</a>
        {% endif %}
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <p class="text-center text-muted">No upcoming training sessions found.</p>
  </div>
  {% endfor %}
</div>
{% endblock %}